<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css"/>
<div class="panel panel-default">
  <div class="panel-body">
  <h4 class="media-heading page-part-title">Informations</h4>
  <br />
  <div id="container">
    <div class="container">
      <!--<div class="alert alert-success alert-dismissable" ng-hide="applicationIsOwned">
        <a class="panel-close close" data-dismiss="alert">×</a>
        <i class="fa fa-info"></i>
        Cette application est déjà dans votre bibliothèque
      </div>-->
      <div class="well">
          <div class="media">
            <div class="left-part-appInfos">
              <div class="app-infos">
                <img class="media-object cadre-images main-profile-picture" ng-src="{{ appInfos.logo }}" style="width: 150px; height: 150px;">
                <div id="app-rating-main">
                    <span ng-show="appInfos.noteAvg != null" ng-repeat="t in getNumberFullStar(appInfos.noteAvg) track by $index" ng-class="{'app-rating-main-last-child':$last}" class="glyphicon glyphicon-star"></span>
                    <span ng-show="appInfos.noteAvg != null" ng-repeat="t in getNumberEmptyStar(5 - appInfos.noteAvg) track by $index" class="glyphicon glyphicon-star-empty"></span>
                </div>
              </div>
      		  </div>
      		<div class="media-body">
        		<h4 class="media-heading">{{appInfos.name }}</h4>
              <p class="text-right date-publication">Publiée le : {{ appInfos.created_at | date:'dd/MM/yyyy'}}</p>
              <p class="description-application">
                {{ appInfos.description }}
              </p>
              <p class="text-left"><b>Développée par :</b> {{ appInfos.author.public.pseudo }}</p>
              <span ng-if="paymentType" class="animate-if">
                  <p class="text-right">
                    <button type="button" class="btn btn-secondary btn-beavr btn-lg" ng-click="checkPriceAction()" ng-show="isConnected">{{ appInfos.price == "0" | iif : "Gratuite" : appInfos.price + "€" }}</button>
                  </p>
              </span>
              <span ng-if="!paymentType" class="animate-if">
                <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" target="_top">
                <input type="hidden" name="cmd" value="_xclick">
                <input type="hidden" name="business" value="napsters.desmars@gmail.com">
                <input type="hidden" name="lc" value="US">
                <input type="hidden" name="item_name" value="{{ appInfos.name }}">
                <input type="hidden" name="amount" value="{{ appInfos.price }}">
                <input type="hidden" name="currency_code" value="USD">
                <input type="hidden" name="button_subtype" value="services">
                <input type="hidden" name="no_note" value="0">
                <input type="hidden" name="tax_rate" value="0.00">
                <input type="hidden" name="shipping" value="0.00">
                <input type="hidden" value="http://beavr-store.herokuapp.com/#/payment" name="return">
                <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHostedGuest">
                <p class="text-right">
                  <input class="btn btn-secondary btn-beavr btn-lg" type="image" src="" border="0" name="submit" alt="" value="Payer" ng-show="isConnected">
                </p>
                </form>
              </span>
           </div>
        </div>
      </div>
    </div>
  </div>

  <div id="appScreenshots" ng-show="appInfosScreenshots.length > 0">
    <br />
    <h4 class="media-heading page-part-title">Images de l'application</h4>
    <br />
    <div class="col-md-12">
      <uib-carousel class="carousel slide" active="active" interval="myInterval" no-wrap="noWrapSlides">
        <uib-slide ng-repeat="screen in appInfosScreenshots track by screen.id" index="screen.id">
          <img class="slide-image" ng-src="{{screen.image}}">
        </uib-slide>
      </uib-carousel>
    </div>
  </div>
</div>
</div>

<div id="comments-section">
  <h3>{{ appInfos.commentsNb > 0 ? 'Commentaires' : 'Aucun commentaire pour cette application' }}</h3>
  <div id="container" ng-repeat="commentInfos in comments">
    <div class="container">
      <div class="well">
          <div class="media">
            <div class="left-part-comment">
              <div class="comment-infos">
                <img class="media-object cadre-images profile-picture" ng-src="{{ commentInfos.author.public.picture }}">
                <div id="comment-rating">
                    <span ng-show="commentInfos.rating != null" ng-repeat="t in getNumberFullStar(commentInfos.rating) track by $index" ng-class="{'ratings-last-child':$last}" class="glyphicon glyphicon-star"></span>
                    <span ng-show="commentInfos.rating != null" ng-repeat="t in getNumberEmptyStar(5 - commentInfos.rating) track by $index" class="glyphicon glyphicon-star-empty"></span>
                </div>
              </div>
            </div>
          <div class="media-body">
            <div class="comment-header">
              <h4 class="media-heading title-comment"> {{ commentInfos.title }}</h4>
              <p class="text-right author-name">Par <span style="font-weight:bold">{{commentInfos.author.public.pseudo == null ? 'Anonyme' : commentInfos.author.public.pseudo}}</span></p>
            </div>
              <p>
                {{ commentInfos.comment }}
              </p>
              <ul class="list-inline list-unstyled">
                  <li><span><i class="glyphicon glyphicon-calendar"></i> {{ commentInfos.created_at | date:'dd/MM/yyyy HH:mm' : '+0200' }}</span></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="under-comments">
    <a ng-show="appInfos.commentsNb > 0" ng-href="#/applications/details/{{ appInfos.id }}/comments" class="btn-beavr btn-lg">En voir plus ({{ appInfos.commentsNb }} avis)</a>
  </div>
</div>
